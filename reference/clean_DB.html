<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clean DB columns for plotting using the metadata — clean_DB • REDCapDB</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean DB columns for plotting using the metadata — clean_DB"><meta name="description" content="This function cleans the columns of a DB object, transforming choice fields into factors and ensuring numeric columns are set correctly for table processing or plotting (e.g., using table1). It handles the transformation of missing values and optional removal of certain codes based on user input."><meta property="og:description" content="This function cleans the columns of a DB object, transforming choice fields into factors and ensuring numeric columns are set correctly for table processing or plotting (e.g., using table1). It handles the transformation of missing values and optional removal of certain codes based on user input."><meta property="og:image" content="https://thecodingdocs.github.io/REDCapDB/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">REDCapDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/REDCapDB.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Advanced.html">REDCapDB for the Advanced R User</a></li>
    <li><a class="dropdown-item" href="../articles/Basic.html">REDCapDB for the Basic R User</a></li>
    <li><a class="dropdown-item" href="../articles/DB_object.html">The DB Object</a></li>
    <li><a class="dropdown-item" href="../articles/Download.html">Downloading REDCap Data</a></li>
    <li><a class="dropdown-item" href="../articles/Intermediate.html">REDCapDB for the Intermediate R User</a></li>
    <li><a class="dropdown-item" href="../articles/multiple_projects.html">Managing Multiple REDCap Projects</a></li>
    <li><a class="dropdown-item" href="../articles/project_cache.html">The Project Cache</a></li>
    <li><a class="dropdown-item" href="../articles/REDCap.html">REDCap Project Structure</a></li>
    <li><a class="dropdown-item" href="../articles/RosyREDCap.html">RosyREDCap Shiny App</a></li>
    <li><a class="dropdown-item" href="../articles/Security.html">Security Measures</a></li>
    <li><a class="dropdown-item" href="../articles/Tokens.html">Tokens</a></li>
    <li><a class="dropdown-item" href="../articles/Upload.html">Uploading REDCap Data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/thecodingdocs/REDCapDB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Clean DB columns for plotting using the metadata</h1>
      <small class="dont-index">Source: <a href="https://github.com/thecodingdocs/REDCapDB/blob/master/R/DB_summarize.R" class="external-link"><code>R/DB_summarize.R</code></a></small>
      <div class="d-none name"><code>clean_DB.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function cleans the columns of a <code>DB</code> object, transforming choice fields into factors and ensuring numeric columns are set correctly for table processing or plotting (e.g., using <code>table1</code>). It handles the transformation of missing values and optional removal of certain codes based on user input.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clean_DB</span><span class="op">(</span><span class="va">DB</span>, drop_blanks <span class="op">=</span> <span class="cn">FALSE</span>, other_drops <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-db">DB<a class="anchor" aria-label="anchor" href="#arg-db"></a></dt>
<dd><p>A validated <code>DB</code> object containing REDCap project data and
settings. Generated using <a href="setup-load.html">load_DB</a> or <a href="setup-load.html">setup_DB</a></p></dd>


<dt id="arg-drop-blanks">drop_blanks<a class="anchor" aria-label="anchor" href="#arg-drop-blanks"></a></dt>
<dd><p>Logical. If TRUE, will drop choice fields with zero occurrences (n = 0). Default is FALSE.</p></dd>


<dt id="arg-other-drops">other_drops<a class="anchor" aria-label="anchor" href="#arg-other-drops"></a></dt>
<dd><p>A list of additional fields or choices to drop from the data. Defaults to NULL.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A cleaned <code>DB</code> object ready for table or plot processing.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function works by cleaning up the data frame list (<code>DB$data</code>) according to the metadata (<code>DB$metadata$fields</code>). It converts choice fields into factors, numeric fields are treated appropriately, and any unwanted or missing codes can be dropped based on the parameters provided. The function also ensures that the data is only cleaned once by checking the internal <code>is_clean</code> flag.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The function will not proceed with cleaning if <code>DB$internals$is_clean</code> is already TRUE, signaling that the DB has already been cleaned.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brandon Rose, Natalie Goulett, Chris Hilsinger-Pate, Nikola Susic.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

